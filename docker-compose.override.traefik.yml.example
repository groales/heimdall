# docker-compose.override.traefik.yml.example
#
# Este archivo muestra cómo integrar Heimdall con Traefik del repositorio groales/traefik.
# Para usarlo:
#   Desde Portainer (Git Repository):
#     - Repository URL: https://git.ictiberia.com/groales/heimdall
#     - Compose path: docker-compose.yml
#     - Additional paths: docker-compose.override.traefik.yml.example
#
#   Desde CLI:
#     1. Copia este archivo a docker-compose.override.yml
#     2. Ajusta el dominio (heimdall.tudominio.com)
#
# Docker Compose automáticamente fusiona docker-compose.yml + docker-compose.override.yml

services:
  heimdall:
    networks:
      - proxy
    labels:
      # Habilitar Traefik
      - "traefik.enable=true"
      
      # Router HTTPS
      - "traefik.http.routers.heimdall.rule=Host(`heimdall.tudominio.com`)"
      - "traefik.http.routers.heimdall.entrypoints=websecure"
      - "traefik.http.routers.heimdall.tls=true"
      - "traefik.http.routers.heimdall.tls.certresolver=letsencrypt"
      
      # Service backend
      - "traefik.http.services.heimdall.loadbalancer.server.port=80"
      
      # Middlewares de seguridad (opcional)
      - "traefik.http.routers.heimdall.middlewares=security-headers@file"

networks:
  proxy:
    external: true
